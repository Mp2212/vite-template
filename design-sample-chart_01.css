<template>
  <div class="scroll">
    <section class="grid">
      <div
        v-for="app in sorted"
        :key="app.appName + app.ait"
        class="box"
        @mouseenter="tip = app"
        @mouseleave="tip = null"
      >
        {{ app.appName }}
      </div>
    </section>
  </div>

  <div v-if="tip" class="tooltip">
    <strong>{{ tip.appName }}</strong><br />
    Env : {{ tip.env }}<br />
    Deployed : {{ tip.deploymentTime }}
  </div>
</template>

<script setup>
import { computed, ref } from "vue";

/* ONE prop — your raw array */
const props = defineProps({ heatmapData: { type: Array, required: true } });

/* Sort only once (DESC by deploymentTime) */
const sorted = computed(() =>
  [...props.heatmapData].sort(
    (a, b) => new Date(b.deploymentTime) - new Date(a.deploymentTime)
  )
);

/* Tooltip state */
const tip = ref(null);
</script>

<style scoped>
.scroll { width:100%; overflow-x:auto; padding-bottom:6px; }
.grid   { display:flex; gap:4px; flex-wrap:nowrap; }

.box{
  width:80px; height:80px;
  display:flex; justify-content:center; align-items:center;
  font:600 .9rem "Inter",sans-serif;
  background:#c4d6ff;            /* single colour — tweak if you like */
  border-radius:6px; color:#333; text-align:center;
  cursor:pointer;
}

.tooltip{
  position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
  background:#fff; padding:8px 10px; border-radius:6px;
  box-shadow:0 4px 14px rgba(0,0,0,.15); font-size:.8rem;
}
</style>
